<!-- Define que el documento esta bajo el estandar de HTML 5 -->
<!doctype html>

<!-- Representa la raíz de un documento HTML o XHTML. Todos los demás elementos deben ser descendientes de este elemento. -->
<html lang="es" xmlns:th="http://thymeleaf.org" onmousemove="position(event);">

<head>

	<meta charset="utf-8">

	<title> Formulario de Acceso </title>

	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
		integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
		integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
		crossorigin="anonymous"></script>
	<style type="text/css">
		/*//////////////////////////////////////////////////////////////////
		[ FONT ]*/

		input {
			margin-bottom: 2%;
		}

		#addUsers {
			display: none;
		}

		#showUsers {
			display: none;
		}

		#delUser {
			display: none;
		}

		#showEmployeers {
			display: none;
		}

		#addEmployeers {
			display: none;
		}

		#delEmployeers {
			display: none;
		}

		#loginformAdd {
			position: absolute;
			bottom: 10%;
			left: 11%;

		}

		#practicandoJS {
			display: none;
		}

		body {
			background-color: #0f4c75;
			padding-top: 5%;
		}

		#contenedor {
			margin-top: 5%;
			width: 80%;
			margin: auto;
		}

		#contenedorFuncionalidades {
			width: 80%;
			position: absolute;
			top: 30%;
		}

		#addUsers {
			margin-left: 30%;
			margin-top: 20%;
		}

		#addEmployeers {
			margin-left: 30%;
			margin-top: 30%;
		}

		#assignedRol {
			position: absolute;
			top: 1%;
			left: 11%;
			color: white;
		}

		#mousePositions {
			border: solid white 1px;
			color: white;
			font-family: Arial, Helvetica, sans-serif;
			font-size: 11px;
			height: 300px;
			overflow: auto;
			width: 150px;
			height: auto;
		}
		
		#control{
			color: white;
		}
	</style>

	<script type="text/javascript">
		class Car {
			constructor(name, year) {
				this.name = name;
				this.year = year;
			}
		}

		//Math.trunc(3.2);
		//Math.sign(2);
		//Math.cbrt(3);
		//Math.log2(40);
		//Math.log10(10);  


		//Number.isInteger(3.5);

		async function miDisplay() {
			let miPromise = new Promise(function (miResolve, miReject) {
				setTimeout(function () {alert("Aqui estamos !!");}, 3000);
			});
		}

		function addUsersFunc() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			addUsers1.style.display = "block";
			addEmployeers.style.display = "none";
			showUsers.style.display = "none";
			delEmployeers.style.display = "none";
			delUser.style.display = "none";
			showEm.style.display = "none";
			ejercicioJS.style.display = "none";
			aniadir.innerHTML = "";
		}

		function ejercicioClick() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			addUsers1.style.display = "none";
			addEmployeers.style.display = "none";
			showUsers.style.display = "none";
			delEmployeers.style.display = "none";
			delUser.style.display = "none";
			showEm.style.display = "none";
			ejercicioJS.style.display = "block";
			aniadir.innerHTML = "";
		}

		function addEmployeersFunc() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			addUsers1.style.display = "none";
			addEmployeers.style.display = "block";
			showUsers.style.display = "none";
			delEmployeers.style.display = "none";
			delUser.style.display = "none";
			showEm.style.display = "none";
			ejercicioJS.style.display = "none";
			aniadir.innerHTML = "";
		}
		function aniadirPalabra() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			addUsers1.style.display = "none";
			addEmployeers.style.display = "none";
			showUsers.style.display = "none";
			delEmployeers.style.display = "none";
			delUser.style.display = "none";
			showEm.style.display = "none";
			ejercicioJS.style.display = "none";
			aniadir.innerHTML = "PRUEBA";
		}
		function showUsersFunc() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			ejercicioJS.style.display = "none";
			addUsers1.style.display = "none";
			addEmployeers.style.display = "none";
			showUsers.style.display = "block";
			delEmployeers.style.display = "none";
			delUser.style.display = "none";
			showEm.style.display = "none";
			aniadir.innerHTML = "";
		}


		function delUsersFunc() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			ejercicioJS.style.display = "none";
			addUsers1.style.display = "none";
			addEmployeers.style.display = "none";
			showUsers.style.display = "none";
			delEmployeers.style.display = "none";
			delUser.style.display = "block";
			showEm.style.display = "none";
			aniadir.innerHTML = "";
		}


		function delEmployeersFunc() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			ejercicioJS.style.display = "none";
			addUsers1.style.display = "none";
			addEmployeers.style.display = "none";
			showUsers.style.display = "none";
			delEmployeers.style.display = "block";
			delUser.style.display = "none";
			showEm.style.display = "none";
			aniadir.innerHTML = "";
		}

		function clickEjercicio() {
			var select = document.getElementById('frutas').value;
			var select1 = document.getElementById('pescados').value;
			var select2 = document.getElementById('carnes').value;
			var select3 = document.getElementById('drogueria').value;

			alert(select + ", " + select1 + ", " + select2 + ", " + select3);
		}

		function showEmployeersFunc() {
			let addUsers1 = document.getElementById("addUsers");
			let addEmployeers = document.getElementById("addEmployeers");
			let showUsers = document.getElementById("showUsers");
			let delUser = document.getElementById("delUser");
			let delEmployeers = document.getElementById("delEmployeers");
			let showEm = document.getElementById("showEmployeers");
			let aniadir = document.getElementById("contenedorPalabra");
			let ejercicioJS = document.getElementById("practicandoJS");
			ejercicioJS.style.display = "none";
			addUsers1.style.display = "none";
			addEmployeers.style.display = "none";
			showUsers.style.display = "none";
			delEmployeers.style.display = "none";
			delUser.style.display = "none";
			showEm.style.display = "block";
			aniadir.innerHTML = "";
		}

		function ejecutar() {
			let container = document.getElementById("contenedor");
			const body = document.body,
				tbl = document.createElement('table');
			tbl.style.width = '100%';
			tbl.style.border = '1px solid white';
			tbl.style.color = "white";
			tbl.style.marginTop = "10%";
			tbl.className += "table table-dark table-hover";

			for (let i = 0; i < 3; i++) {
				const tr = tbl.insertRow();
				for (let j = 0; j < 2; j++) {
					if (i === 2 && j === 1) {
						break;
					} else {
						const td = tr.insertCell();
						td.appendChild(document.createTextNode(`Fila I${i}/J${j}`));
						td.style.border = '1px solid black';
						if (i === 1 && j === 1) {
							td.setAttribute('rowSpan', '2');
						}
					}
				}
			}
			container.appendChild(tbl);
			let btn = document.createElement("button");
			btn.innerHTML = "Eliminar";
			btn.className += "btn btn-primary";
			btn.onclick = function () {
				container.removeChild(tbl);
				container.removeChild(btn);
			};
			container.appendChild(btn);
		}

		function resalta(elEvento) {
			var evento = elEvento || window.event;
			switch (evento.type) {
				case 'mouseover':
					this.style.borderColor = 'grey';
					break;
			}
		}
		window.onload = function () {
			document.getElementById("formButtons").onmouseover = resalta;
		}

		function ejercicioJavascript() {

			let valores = [true, 5, false, "hola", "adios", 2];

			if (valores[3].length > valores[4].length) {
				console.log("el primero es mas largo que el segundo");
			} else if (valores[3].length < valores[4].length) {
				console.log("el segundo es mas largo que el primero");
			}

			let bool1 = valores[0];
			let bool2 = valores[2];
			//para resultado true 
			if (bool1 || bool2) {
				console.log("esto es true ");
			}

			if (bool1 && bool2) {
				console.log("no entra aqui por que es false");
			}

			let num1 = valores[1];
			let num2 = valores[5];
			let suma = num1 + num2;
			let resta = num1 - num2;
			let multiplicacion = num1 * num2;

			var dias =
				["Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"];
			for (i in dias) {
				alert(dias[i]);
			}

		}


		function multiplicar(tabla) {
			var cadena = "";
			var i;
			for (i = 1; i <= 10; i++) {
				cadena = cadena + i + " x " + tabla + " = " + (tabla * i) + "; ";
			}
			return cadena;
		}

		function dotest(element, event) {
			const url = "http://localhost:8081/modifyUser";
			const data = {
				id: element.getElementsByTagName("td")[0].textContent,
				user: element.getElementsByTagName("td")[1].textContent,
				rol: element.getElementsByTagName("td")[2].textContent,
				estado: element.getElementsByTagName("td")[3].textContent
			}
			axios({
				method: "post",
				url: url,
				data: {
					data
				}
			}).then(data => console.log(data)).catch(err => console.log(err))
		}

		function resalta(elemento) {
			switch (elemento.style.borderColor) {
				case 'silver':
				case 'silver silver silver silver':
				case '#c0c0c0':
					elemento.style.borderColor = 'black';
					break;
				case 'black':
				case 'black black black black':
				case '#000000':
					elemento.style.borderColor = 'silver';
					break;
			}
		}
		function position(event) {
			var x = event.clientX;
			var y = event.clientY;
			var mousePositions = document.getElementById('mousePositions');
			mousePositions.innerHTML = 'X coords: ' + x + ', Y coords: ' + y;
			if(y<=screen.height/2){
				if(x<= screen.width/2){
					mousePositions.innerHTML ="arriba izquierda";
				}else{
					mousePositions.innerHTML ="arriba derecha";
				}
			}else{
				if(x<= screen.width/2){
					mousePositions.innerHTML ="abajo izquierda";
				}else{
					mousePositions.innerHTML ="abajo derecha";
				}
			}
		}
		document.addEventListener('keydown', function (e) {
			//Dependiendo del navegador usara el which o el keycode OJO ES IMPORTANTE
			var keycodeentero = event.which || event.keyCode;
			//Buscamos el objeto tecla
			var objeto = document.getElementById('control');
			// Y con el String obtenemos la tecla presionada.
			objeto.textContent = 'La tecla presionada es: ' + String.fromCharCode(keycodeentero);
		})
	</script>
</head>



<body>
	<div id="assignedRol">
		<p>Este usuario tiene permisos de administrador</p>
		<hr>
	</div>
	<div id="contenedor">
		<div id="formButtons" class="container justify-content-center">
			<button class="btn btn-primary" name="Crear" onclick="addUsersFunc()" title="Crear" type="submit">Create
				user</button>
			<button class="btn btn-primary" name="CrearE" onclick="addEmployeersFunc()" title="CrearE"
				type="submit">Create
				employeers</button>
			<button class="btn btn-primary" name="Mostrar" onclick="showUsersFunc()" title="Mostrar" type="submit">Show
				users</button>
			<button class="btn btn-primary" name="MostrarE" onclick="showEmployeersFunc()" title="MostrarE"
				type="submit">Show employers</button>
			<button class="btn btn-primary" name="Borrar" onclick="delUsersFunc()" title="Borrar" type="submit">Delete
				user</button>
			<button class="btn btn-primary" name="BorrarE" onclick="delEmployeersFunc()" title="Borrar"
				type="submit">Delete
				Employeer</button>
			<button class="btn btn-primary" name="EjercicioJs" onclick="ejecutar()" title="EjercicioJs"
				type="submit">Ejercicio Js</button>
		</div>
		<div id="contenedorFuncionalidades">
			<div id="addUsers">
				<form id="loginformAdd" method="POST" th:action="@{/addUser}">
					<input name="username" class="form-control" placeholder="usuario" required type="text">
					<input name="password" class="form-control" placeholder="Contraseña" required type="password">
					<select name="rol" required class="form-control">
						<option value="1">admin</option>
						<option selected value="2">advanced</option>
						<option value="3">basic</option>
					</select><br><br>
					<button type="submit" title="Crear" name="Crear" class="btn btn-outline-primary">Crear
						usuario</button>
				</form>
			</div>
			<div id="addEmployeers">
				<form id="loginformAdd" method="POST" th:action="@{/addEmployeer}">
					<input name="nombre" class="form-control" placeholder="usuario" required type="text">
					<input name="apellidos" class="form-control" placeholder="usuario" required type="text">
					<input name="dni" class="form-control" placeholder="dni" required type="text">
					<input name="fecha_alta" class="form-control" placeholder="fecha_alta" required type="date">
					<input name="fecha_alta" class="form-control" placeholder="fecha_alta" required type="date">
					<input name="jornadas_id" class="form-control" placeholder="jornadas_id" required
						type="text"><br><br>
					<button type="submit" title="Crear" name="Crear" class="btn btn-outline-primary">Crear
						usuario</button>
				</form>
			</div>
			<div id="showUsers">
				<div class="row align-items-start">
					<div class="col">
						<table class="table table-dark table-hover">
							<br>
							<thead>
								<tr>
									<th>Id</th>
									<th>Username</th>
									<th>Rol</th>
									<th>Estado</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="u: ${listaUsers}" onkeyup="javascript:dotest(this,event);">
									<td th:text="${u.id}"></td>
									<td th:text="${u.user}" contenteditable='true'></td>
									<td th:text="${u.role.getRol()}" contenteditable='true'></td>
									<td th:text="${u.enabled == 1 } ? 'ACTIVO' : 'DESHABILITADO'"
										contenteditable='true'>
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div id="showEmployeers">
				<div class="row align-items-start">
					<div class="col">
						<table class="table table-dark table-hover">
							<br>
							<thead>
								<tr>
									<th>Id</th>
									<th>Name</th>
									<th>Surnames</th>
									<th>Dni</th>
									<th>Fecha Alta</th>
									<th>Fecha Baja</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="u: ${listaEmployeers}" onkeyup="javascript:dotest(this,event);">
									<td th:text="${u.id}"></td>
									<td th:text="${u.nombre}" contenteditable='true'></td>
									<td th:text="${u.apellidos}" contenteditable='true'></td>
									<td th:text="${u.dni}" contenteditable='true'></td>
									<td th:text="${u.fecha_alta }" contenteditable='true'></td>
									<td th:text="${u.fecha_baja }" contenteditable='true'></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div id="delUser">
				<form id="loginformDel" method="DELETE" th:action="@{/deleteUser}">
					<input name="userId" placeholder="userId" required type="text" class="form-control">
					<button type="submit" class="btn btn-outline-primary">Delete</button>
				</form>
			</div>
			<div id="delEmployeers">
				<form id="loginformDel" method="DELETE" th:action="@{/deleteUser}">
					<input name="employeerId" placeholder="employeerId" required type="text" class="form-control">
					<button type="submit" class="btn btn-outline-primary">Delete</button>
				</form>
			</div>
			<div id="mousePositions"></div>
			<div id="practicandoJS"></div>
			<div id="control"> </div>

		</div>
	</div>
	<div id="loginformAdd">
		<form method="POST" th:action="@{/checkEmpleados}">
			<button class="btn btn-primary" type="submit" title="Crear" name="Crear">Verificar empleados</button>
		</form>
	</div>


</body>

</html>